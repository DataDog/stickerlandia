# Unless explicitly stated otherwise all files in this repository are licensed under the Apache License Version 2.0.
# This product includes software developed at Datadog (https://www.datadoghq.com/).
# Copyright 2025-Present Datadog, Inc.

# Test database configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.devservices.enabled=true

# Test Hibernate ORM configuration
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=true

# Disable Flyway for tests
quarkus.flyway.enabled=false

# Use same messaging configuration as dev mode - Dev Services will handle infrastructure
# Keep the same Kafka topics and channels

# For integration tests, configure Kafka properly
%prod.kafka.bootstrap.servers=localhost:9092
%prod.quarkus.kafka.devservices.enabled=true

# Enable mockito for CDI beans
quarkus.arc.mock-enabled=true

# Seed data for tests
%test.quarkus.hibernate-orm.sql-load-script=import-test.sql

# Enable Kafka Dev Services for tests
quarkus.kafka.devservices.enabled=true
quarkus.kafka.devservices.port=0

# S3 Dev Services configuration for tests
quarkus.s3.devservices.enabled=true
quarkus.s3.devservices.buckets=sticker-images
quarkus.s3.aws.region=us-east-1
quarkus.s3.aws.credentials.type=static
quarkus.s3.aws.credentials.static-provider.access-key-id=test-key
quarkus.s3.aws.credentials.static-provider.secret-access-key=test-secret
sticker.images.bucket=sticker-images

# Force off JSON logging to make things more readable
quarkus.log.console.json.enabled=false